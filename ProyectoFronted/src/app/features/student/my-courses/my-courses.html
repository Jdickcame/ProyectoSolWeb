<app-navbar></app-navbar>

<div class="my-courses-page bg-light min-vh-100 py-5">
  <div class="container">
    <div class="mb-5">
      <h1 class="h2 fw-bold mb-2">Mis Cursos</h1>
      <p class="text-muted">Contin√∫a tu aprendizaje donde lo dejaste</p>
    </div>

    @if (isLoading()) {
      <div class="text-center py-5">
        <app-loading-spinner [size]="60" message="Cargando cursos..."></app-loading-spinner>
      </div>
    } 
    @else if (enrollments().length > 0) {
      <div class="row g-4">
        @for (enrollment of enrollments(); track enrollment.id) {
          <div class="col-lg-4 col-md-6">
            <div class="course-card card-modern h-100 shadow-sm border-0">
              
              <div class="course-thumbnail position-relative overflow-hidden" style="height: 180px;">
                @if (enrollment.course.thumbnail) {
                  <img [src]="enrollment.course.thumbnail" alt="" class="w-100 h-100 object-fit-cover">
                } @else {
                  <div class="placeholder-thumbnail bg-dark w-100 h-100 d-flex align-items-center justify-content-center">
                    <i class="bi bi-mortarboard text-white fs-1" aria-hidden="true"></i>
                  </div>
                }
                
                <span class="position-absolute top-0 end-0 m-3 badge bg-white text-dark shadow-sm">
                  {{ enrollment.course.category }}
                </span>
              </div>

              <div class="card-body p-4 d-flex flex-column">
                <h5 class="card-title fw-bold mb-3 text-truncate">{{ enrollment.course.title }}</h5>
                
                <div class="mb-4">
                  <div class="d-flex justify-content-between small mb-1">
                    <span class="text-muted">Progreso</span>
                    <span class="fw-bold">{{ enrollment.progressPercentage }}%</span>
                  </div>
                  <div class="progress" style="height: 6px;">
                    <div 
                      class="progress-bar bg-gradient" 
                      role="progressbar" 
                      [style.width.%]="enrollment.progressPercentage"
                      [attr.aria-valuenow]="enrollment.progressPercentage" 
                      aria-valuemin="0" 
                      aria-valuemax="100">
                    </div>
                  </div>
                </div>

                <div class="mt-auto d-flex align-items-center justify-content-between">
                  <app-rating-stars [rating]="enrollment.course.rating"></app-rating-stars>
                  
                  <a [routerLink]="['/student/course', enrollment.course.id]" class="btn btn-sm btn-gradient rounded-pill px-3">
                    {{ enrollment.progressPercentage > 0 ? 'Continuar' : 'Empezar' }}
                    <i class="bi bi-arrow-right ms-1"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    } 
    @else {
      <div class="card-modern p-5 text-center border-0 shadow-sm">
        <i class="bi bi-journal-x display-1 text-muted mb-3 d-block"></i>
        <h3 class="h4 mb-2">No tienes cursos inscritos</h3>
        <p class="text-muted mb-4">Explora nuestra biblioteca y comienza a aprender hoy mismo.</p>
        <a routerLink="/courses" class="btn btn-gradient btn-lg">
          Explorar Cursos
        </a>
      </div>
    }
  </div>
</div>

<app-footer></app-footer>